---
title: "Паттерн Компоновщик (Composite) — разбор и примеры на JavaScript"
description: "Паттерн Компоновщик помогает работать с древовидными структурами, объединяя объекты и их группы. Примеры на JavaScript и объяснения."
keywords:
    [
        "паттерн компоновщик",
        "composite pattern",
        "javascript паттерны",
        "работа с деревьями",
        "проектирование ПО",
        "composite javascript пример",
    ]
---

# Что такое паттерн **"Компоновщик" (Composite)**

**Компоновщик** — структурный паттерн проектирования, который позволяет сгруппировать объекты в древовидную структуру и работать с отдельными объектами и группами одинаково. Это упрощает обработку сложных иерархий.

Представьте, что у вас есть элемент интерфейса, который может содержать как простые элементы, так и другие группы элементов. Компоновщик даёт единый интерфейс для работы с обоими типами — с листьями и контейнерами.

**Преимущества паттерна «Компоновщик»**

- Позволяет строить древовидные структуры объектов.
- Обеспечивает единый интерфейс для работы с отдельными объектами и группами.
- Упрощает клиентский код, избавляя от необходимости различать составные объекты и простые.

**Пример:**

- Интерфейс: **Component**
- Листья: отдельные объекты без вложенных элементов.
- Контейнеры: объекты, содержащие другие компоненты.

**Где применяется паттерн «Компоновщик»?**

- Графические редакторы (слои, группы объектов).
- Файловые системы и структуры каталогов.
- Организационные структуры и меню.

## Пример реализации на JavaScript

```javascript
// Абстрактный компонент
class Component {
    add(component) {
        throw new Error("Метод add() не реализован");
    }
    remove(component) {
        throw new Error("Метод remove() не реализован");
    }
    display(depth = 0) {
        throw new Error("Метод display() не реализован");
    }
}

// Лист — простой объект
class Leaf extends Component {
    constructor(name) {
        super();
        this.name = name;
    }

    display(depth = 0) {
        console.log("-".repeat(depth) + this.name);
    }
}

// Контейнер — сложный объект, содержит другие компоненты
class Composite extends Component {
    constructor(name) {
        super();
        this.name = name;
        this.children = [];
    }

    add(component) {
        this.children.push(component);
    }

    remove(component) {
        const index = this.children.indexOf(component);
        if (index !== -1) {
            this.children.splice(index, 1);
        }
    }

    display(depth = 0) {
        console.log("-".repeat(depth) + this.name);
        this.children.forEach((child) => child.display(depth + 2));
    }
}

// Использование
const root = new Composite("root");
const child1 = new Composite("branch1");
const child2 = new Composite("branch2");
const leaf1 = new Leaf("leaf1");
const leaf2 = new Leaf("leaf2");
const leaf3 = new Leaf("leaf3");

root.add(child1);
root.add(child2);
child1.add(leaf1);
child1.add(leaf2);
child2.add(leaf3);

root.display();
```

## Когда стоит использовать паттерн «Компоновщик»?

- Когда нужно работать с древовидными структурами.
- Когда важно одинаково обрабатывать простые и составные объекты.
- Чтобы упростить структуру кода и сделать его более гибким.

## Отличие от других паттернов

- В отличие от [декоратора]({{decorator}}), компоновщик работает с иерархиями объектов. Компоновщик даёт единый интерфейс для работы с отдельными и составными объектами.

## Плюсы паттерна

- Упрощает работу с иерархическими структурами.
- Улучшает читаемость и расширяемость кода.
- Позволяет добавлять новые компоненты без изменения клиентского кода.

## Минусы паттерна

- Может усложнить структуру при чрезмерном использовании.
- Требует аккуратности при проектировании интерфейсов компонентов.
